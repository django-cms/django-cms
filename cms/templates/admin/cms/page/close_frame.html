{% extends "admin/change_form.html" %}
{% load i18n l10n admin_static cms_static %}

{% block title %}{% trans "Change a page" %}{% endblock %}

{% block content %}
<script>
window.CMS || window.parent.CMS || document.write(
    '<script src="{% static_with_version "cms/js/dist/bundle.admin.base.min.js" %}" type="text/javascript"><\/script>'
);
</script>
<script>
    // we have a special case here cause the CMS namespace
    // can be either inside the current window or the parent
    (function(Window) {
        // the dataBridge is used to access plugin information from different resources
        // Do NOT move this!!!
        Window.CMS.API.Helpers.dataBridge = {
            'plugin_id': '{{ plugin_id|unlocalize }}',
            'plugin_type': '{{ type }}',
            'plugin_name': '{{ name }}',
            'plugin_icon': '{{ icon }}',
            'plugin_desc': '{{ alt }}'
        };

        Window.CMS.$(document).ready(function () {
            // save current plugin
            Window.CMS.API.Helpers.reloadBrowser(undefined, {{ window_close_timeout|default:500 }});
        });
    })(window.parent || window);
</script>
{% endblock %}
